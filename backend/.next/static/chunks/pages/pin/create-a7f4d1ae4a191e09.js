(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[604],{6441:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pin/create",function(){return n(4099)}])},4099:function(e,t,n){"use strict";n.r(t);var r=n(5893),a=n(7294),s=n(8221),l=n(601),i=n(9603),c=n(9417),o=n(8607),d=n(5521),u=n(4265),x=n(8455),m=n(1305);t.default=(0,m.Z)(()=>{let[e,t]=(0,a.useState)(""),[n,m]=(0,a.useState)(""),[h,g]=(0,a.useState)(""),[p,f]=(0,a.useState)(""),[v,j]=(0,a.useState)(null),[b,w]=(0,a.useState)(!1),[N,y]=(0,a.useState)(null),k=async r=>{if(r.preventDefault(),null===v){y("Please upload an image");return}try{let r=await (0,d.iX)({title:e,description:n,altText:h,link:p,image:v});r.success&&(y("Successfully created pin"),t(""),m(""),g(""),f(""),w(!1),j(null))}catch(e){y("Unable to create pin")}w(!1)},Z=()=>{j(null)};return(0,r.jsxs)(x.Z,{children:[N&&(0,r.jsx)(u.Z,{message:N,onClose:()=>y(null)}),(0,r.jsxs)("section",{className:"w-full lg:h-screen flex flex-col justify-center items-center font-[var(--font-open-sans)]",children:[(0,r.jsx)("h1",{className:"mt-16 font-semibold text-2xl border-b-2",children:"Create Pin"}),(0,r.jsxs)("div",{className:"max-w-screen-lg rounded-2xl shadow-md flex justify-evenly flex-col  items-center sm:flex-row gap-8 p-8 desktop-large:mt-0",children:[(0,r.jsx)("div",{className:"bg-lightgray rounded-lg p-8 md:h-96 flex items-center flex-col justify-center",children:(0,r.jsxs)(l.Z,{image:v,setImage:j,removeImage:Z,setFileSizeOverLimit:w,children:[(0,r.jsx)(i.G,{icon:c.$w1,className:"text-2xl hover:text-indianred-100 ease-in",onClick:Z}),(0,r.jsx)("p",{children:"Drag & Drop an image here or click to select"})]})}),(0,r.jsxs)("form",{onSubmit:k,className:"grid grid-cols-1 lg:grid-cols-2 gap-1 w-full md:gap-4 md:w-2/4 lg:w-3/5 font-open-sans text-sm lg:gap-4",children:[(0,r.jsx)("div",{className:"col-span-2",children:(0,r.jsx)(s.Z,{name:"title",text:"Add a title",onChange:e=>{t(e.target.value)},required:""})}),(0,r.jsx)("div",{className:"col-span-2",children:(0,r.jsx)(s.Z,{name:"description",text:"Add a description",onChange:e=>{m(e.target.value)},required:""})}),(0,r.jsx)("div",{className:"col-span-2",children:(0,r.jsx)(s.Z,{name:"alt-description",text:"Add an alt description",onChange:e=>{g(e.target.value)},required:""})}),(0,r.jsx)("div",{className:"col-span-2",children:(0,r.jsx)(s.Z,{name:"url",text:"Add a link",onChange:e=>{f(e.target.value)},required:""})}),(0,r.jsx)("div",{className:"col-span-2 mt-2",children:(0,r.jsx)(o.Z,{disable:b,buttonType:"submit",children:b?"File is to big":"Create"})})]})]})]})]})})},8607:function(e,t,n){"use strict";var r=n(5893);t.Z=e=>{let{handleClick:t,bgColor:n="red",buttonType:a="button",disable:s=!1,textColor:l="textWhite",children:i}=e,c={darkgray:"bg-darkgray hover:bg-gray",lightgray:"bg-lightgray hover:bg-darkgray",red:"bg-red hover:bg-firebrick",firebrick:"bg-firebrick hover:bg-red",white:"bg-white",textWhite:"text-white"};return(0,r.jsx)("button",{type:a,className:"w-full hover:text-white\n        ".concat(c[n]," ").concat(c[l]," p-2 rounded-md \n        shadow-lg ease-in duration-300"),onClick:t,disabled:s,children:i})}},4265:function(e,t,n){"use strict";var r=n(5893),a=n(7294);t.Z=e=>{let{message:t,onClose:n}=e,[s,l]=(0,a.useState)(!0),i=()=>{l(!s),n()};return s&&(0,r.jsx)("div",{className:"flex items-center justify-center fixed top-16 w-full z-40",children:(0,r.jsxs)("label",{className:"min-w-60 h-auto p-4 m-4 bg-red-100 border border-red-600 rounded cursor-pointer font-sans font-normal text-sm bg-lightdarkred",children:[(0,r.jsx)("input",{type:"checkbox",className:"hidden",autoComplete:"off",onChange:i}),(0,r.jsxs)("div",{className:"flex items-center flex-row-reverse text-white gap-4",children:[(0,r.jsx)("span",{className:"float-right pt-1 text-xs cursor-pointer",onClick:i,children:"X"}),(0,r.jsx)("span",{className:"mx-auto sm:text-lg",children:t})]})]})})}},3029:function(e,t,n){"use strict";var r=n(5893);t.Z=e=>{let{sm:t=!1,md:n=!1,lg:a=!1,children:s}=e,l=null;return l=n?"md":a?"lg":"sm",(0,r.jsx)("div",{className:"flex flex-col items-center justify-center \n        text-center rounded-full ring-1 ring-black relative\n        ".concat({sm:"w-6 h-6",md:"w-8 h-8",lg:"w-12 h-12"}[l]),children:s})}},601:function(e,t,n){"use strict";var r=n(5893),a=n(7294);t.Z=e=>{let{image:t="",setImage:n,removeImage:s,setFileSizeOverLimit:l,children:i}=e,[c,o]=(0,a.useState)(!1),d=e=>{if(e.length>0){let t=new FileReader;t.onload=e=>{n(e.target.result)},t.readAsDataURL(e[0])}},u=(0,a.createRef)();return(0,r.jsx)("div",{className:"text-center cursor-pointer",onDragEnter:e=>{e.preventDefault(),o(!0)},onDragLeave:e=>{e.preventDefault(),o(!1)},onDragOver:e=>{e.preventDefault()},onDrop:e=>{e.preventDefault(),o(!1),d(e.dataTransfer.files)},children:t?(0,r.jsx)("img",{src:t,alt:"Dropped",className:"max-w-full max-h-96 mx-auto",onClick:s}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{onClick:()=>{u.current.click()},children:i}),(0,r.jsx)("input",{type:"file",accept:"image/jpeg, image/png",ref:u,className:"hidden",onChange:e=>{let t=e.target.files,n=e.target.files[0].size;n>52428800?l(!0):l(!1),d(t)}})]})})}},8221:function(e,t,n){"use strict";var r=n(5893);t.Z=e=>{let{name:t,type:n="text",text:a="",value:s,noBorderOutline:l=!1,required:i="required",onChange:c,children:o}=e;return(0,r.jsxs)("label",{className:"flex flex-col text-left",children:[o,(0,r.jsx)("input",{type:n,name:t,value:s,placeholder:a,onChange:c,className:"".concat("border-radius-sm p-2 w-95 mt-2 font-open-sans"," ").concat(l?"border-0":"border"," rounded-md"),required:i})]})}},8455:function(e,t,n){"use strict";n.d(t,{Z:function(){return j}});var r=n(5893),a=n(7294),s=n(9332),l=n(1664),i=n.n(l),c=n(5675),o=n.n(c),d=e=>{let{iconName:t,altName:n,width:a=64,height:s=64}=e;return(0,r.jsx)(o(),{src:t,alt:n,width:a,height:s})},u={src:"/_next/static/media/PinEcho.f80cb176.svg",height:25,width:113,blurWidth:0,blurHeight:0},x=e=>{let{isOpen:t,setIsOpen:n,handleLogout:s}=e,l=(0,a.useRef)();return(0,a.useEffect)(()=>{let e=e=>{let t=l.current;t&&!t.contains(e.target)&&n(!1)},r=e=>{let r=document.querySelector(".user-icon");r&&r.contains(e.target)&&n(!t)};return t?(document.addEventListener("mousedown",e),document.addEventListener("mousedown",r)):(document.removeEventListener("mousedown",e),document.removeEventListener("mousedown",r)),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("mousedown",r)}},[t,n]),(0,r.jsx)("div",{ref:l,className:"absolute right-0 mt-2 bg-white border rounded-md shadow-md ".concat(t?"block":"hidden"),children:(0,r.jsxs)("ul",{className:"flex flex-col p-1 gap-2 z-40",children:[(0,r.jsx)("li",{className:"hover:bg-lightgray rounded-sm p-1",children:(0,r.jsx)(i(),{href:"/profile",className:"text-center px-2",children:(0,r.jsx)("span",{className:"text-black hover:text-indianred-200",children:"Profile"})})}),(0,r.jsx)("li",{className:"hover:bg-lightgray rounded-sm p-1",children:(0,r.jsx)(i(),{href:"/pin/saves",className:"text-center px-2",children:(0,r.jsx)("span",{className:"text-black hover:text-indianred-200",children:"Saves"})})}),(0,r.jsx)("li",{className:"hover:bg-lightgray rounded-sm p-1",onClick:s,children:(0,r.jsx)("span",{className:"text-center px-2 text-black hover:text-indianred-200 hover:cursor-pointer",children:"Logout"})})]})})},m=n(3029),h=n(9264),g=n(297),p=n(7102),f=n(4183),v=()=>{let e=(0,s.useRouter)(),[t,n]=(0,a.useState)(!1),{setAuthenticated:l}=(0,f.a)(),[c,o]=(0,a.useState)(null),[v,j]=(0,a.useState)("");(0,a.useEffect)(()=>{let e=async()=>{let e=(0,p.sY)();if(e){let e=await (0,g.PR)();o(e),j(e.profileImage?e.profileImage.path:"")}else l(!1)};e()},[]);let b=()=>{n(e=>!e)},w=async t=>{t.preventDefault();let n=await (0,g.kS)();n&&(l(!1),o(null),e.push("/"))};return(0,r.jsxs)("nav",{className:"fixed left-0 right-0 top-0 flex justify-between p-4 bg-snow drop-shadow-lg z-40",children:[(0,r.jsx)(i(),{href:"/",className:"flex justify-center align-center",children:(0,r.jsx)(d,{className:"m-0 p-0",iconName:u,altName:"pin"})}),c?(0,r.jsxs)("ul",{className:"flex items-center gap-4 text-white",children:[(0,r.jsx)("li",{className:"hover:bg-brightred bg-darkred py-1 px-4 rounded-lg ease-in duration-200",children:(0,r.jsx)(i(),{href:"/pin/create",children:(0,r.jsx)("span",{className:"text-sm text-black hover:text-indianred-200",children:"Create Pin"})})}),(0,r.jsxs)("li",{children:[(0,r.jsx)("span",{className:"hover:cursor-pointer text-black",onClick:b,children:(0,r.jsx)(m.Z,{md:!0,children:(0,r.jsx)(h.Z,{name:c.username,imgName:v})})}),(0,r.jsx)(x,{isOpen:t,setIsOpen:b,handleLogout:w})]})]}):(0,r.jsxs)("ul",{className:"flex items-center gap-4 text-white",children:[(0,r.jsx)("li",{className:"hover:bg-brightred bg-darkred py-1 px-4 rounded-lg ease-in duration-200",children:(0,r.jsx)(i(),{href:"/login",children:(0,r.jsx)("span",{className:"text-sm text-black hover:text-indianred-200",children:"Login"})})}),(0,r.jsx)("li",{className:"hover:bg-brightred bg-darkred py-1 px-4 rounded-lg ease-in duration-200",children:(0,r.jsx)(i(),{href:"/signup",children:(0,r.jsx)("span",{className:"text-sm text-black hover:text-indianred-200",children:"Sign Up"})})})]})]})};function j(e){let{children:t}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(v,{}),(0,r.jsx)("main",{className:"scroll-smooth mt-12",children:t})]})}},9264:function(e,t,n){"use strict";var r=n(5893),a=n(5675),s=n.n(a);t.Z=e=>{let{name:t="",imgName:n="",textSize:a="md",children:l}=e,i=t.slice(0,1).toUpperCase();return(0,r.jsxs)(r.Fragment,{children:[""!==n?(0,r.jsx)(s(),{className:"rounded-full",fill:!0,src:n,alt:n,placeholder:"blur",blurDataURL:n,sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"}):(0,r.jsxs)("span",{className:"font-semibold text-".concat(a),children:[" ",i," ",l," "]}),l]})}},1305:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(8288);function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/login";return(0,r.Z)({WrappedComponent:e,location:t,expectedAuth:!0})}},8288:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(5893),a=n(1163),s=n(4183);function l(){return(0,r.jsx)("p",{children:"Loading..."})}function i(e){let{WrappedComponent:t,LoadingComponent:n=l,expectedAuth:i,location:c}=e;return e=>{let l=(0,a.useRouter)(),{isLoading:o,isAuthenticated:d}=(0,s.a)();return o?(0,r.jsx)(n,{}):i!==d?(l.push(c),(0,r.jsx)(r.Fragment,{})):(0,r.jsx)(t,{...e})}}},5521:function(e,t,n){"use strict";n.d(t,{Cv:function(){return o},Qj:function(){return i},Yr:function(){return m},aZ:function(){return x},ce:function(){return u},fB:function(){return c},iX:function(){return h},oJ:function(){return d},q$:function(){return g}});var r=n(7066),a=n(7102),s=n(3454);let l=s.env.NEXT_PUBLIC_API_URL,i=async()=>{try{let e=await r.Z.get("".concat(l,"/pins"));return e.data}catch(e){console.log("failed",e)}},c=async e=>{let t=await r.Z.get("".concat(l,"/pins/").concat(e));return t.data},o=async()=>{let e=await r.Z.get("".concat(l,"/pins/saves"),a.vc);return e.data},d=async e=>{let t=await r.Z.put("".concat(l,"/pins/save/").concat(e),{},a.vc);return t.data},u=async e=>{let t=await r.Z.put("".concat(l,"/pins/likes/").concat(e),{},a.vc);return t.data},x=async e=>{let t=await r.Z.put("".concat(l,"/pins/comment/likes/").concat(e),{},a.vc);return t.data},m=async(e,t)=>{let n=await r.Z.post("".concat(l,"/pins/comment/").concat(e),t,a.vc);return n.data},h=async e=>{let t=await r.Z.post("".concat(l,"/pins/create-new-pin"),e,a.vc);return t.data},g=async e=>{let t=await r.Z.delete("".concat(l,"/pins/").concat(e),a.vc);return t.data}}},function(e){e.O(0,[976,61,997,774,888,179],function(){return e(e.s=6441)}),_N_E=e.O()}]);