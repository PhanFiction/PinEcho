(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[277],{3235:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile",function(){return s(5365)}])},5365:function(e,t,s){"use strict";s.r(t);var r=s(5893),n=s(7294),a=s(8221),l=s(3029),i=s(9264),c=s(601),d=s(9603),o=s(9417),u=s(1163),m=s(297),x=s(8607),h=s(8455),g=s(1305),p=s(4265);t.default=(0,g.Z)(()=>{let e=(0,u.useRouter)(),[t,s]=(0,n.useState)(""),[g,f]=(0,n.useState)(""),[v,j]=(0,n.useState)(""),[b,N]=(0,n.useState)(""),[w,k]=(0,n.useState)(""),[y,Z]=(0,n.useState)(""),[C,S]=(0,n.useState)(null),[E,L]=(0,n.useState)([]),[D,_]=(0,n.useState)(null),[P,R]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let e=async()=>{let e=await (0,m.PR)();L(e),_(e.profileImage?e.profileImage.path:""),s(e.username),f(e.firstName),j(e.lastName),N(e.email)};e()},[]);let F=async e=>{if(e.preventDefault(),null===D){S("Please upload an image");return}try{let e=await (0,m.Nq)({username:t,firstName:g,lastName:v,password:w,newPassword:y,email:b,profileImage:D});e.success&&(S("Successfully updated information"),k(""),Z(""))}catch(e){S("Unable to update account")}R(!1)};return(0,r.jsxs)(h.Z,{children:[C&&(0,r.jsx)(p.Z,{message:C,onClose:()=>S(null)}),(0,r.jsx)("section",{className:"flex justify-center items-center desktop-large:h-screen",children:(0,r.jsxs)("div",{className:"flex flex-col  gap-4 border-0 rounded-lg shadow-lg relative bg-white outline-none p-4 w-11/12 relative top-8 md:w-2/4 desktop-large:w-1/4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-center my-4",children:[(0,r.jsx)(d.G,{className:"hover:text-red hover:cursor-pointer text-2xl",icon:o.acZ,onClick:()=>{e.push("/")}}),(0,r.jsx)("h3",{className:"text-indianred-100 text-lg font-semibold flex-1 text-center right-2 relative md:text-2xl",children:"Edit Profile"})]}),(0,r.jsx)("div",{className:"flex items-center gap-4 flex-col my-4",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(l.Z,{lg:!0,children:(0,r.jsx)(i.Z,{name:E.username?E.username:"",imgName:D||""})}),(0,r.jsx)("span",{className:"bottom-0 left-8 absolute rounded-full bg-white",children:(0,r.jsx)(c.Z,{setImage:_,removeImage:()=>_(null),setFileSizeOverLimit:R,children:(0,r.jsx)(l.Z,{children:(0,r.jsx)(d.G,{className:"text-indianred-200 text-sm hover:text-firebrick-200 hover:cursor-pointer",icon:o.IwR})})})})]})}),(0,r.jsxs)("form",{className:"grid grid-cols-1 md:auto-cols-fr md:auto-rows-fr gap-4",onSubmit:F,children:[(0,r.jsx)("div",{className:"col-span-2 md:col-span-1",children:(0,r.jsx)(a.Z,{name:"username",text:t,value:t,onChange:e=>{s(e.target.value)},children:"Username"})}),(0,r.jsx)("div",{className:"col-span-2 md:col-span-1",children:(0,r.jsx)(a.Z,{name:"email",text:b,value:b,type:"email",onChange:e=>{N(e.target.value)},children:"Email"})}),(0,r.jsx)("div",{className:"col-span-2 md:col-span-1",children:(0,r.jsx)(a.Z,{name:"first name",text:g,value:g,onChange:e=>{f(e.target.value)},children:"First name"})}),(0,r.jsx)("div",{className:"col-span-2 md:col-span-1",children:(0,r.jsx)(a.Z,{name:"last name",text:v,value:v,onChange:e=>{j(e.target.value)},children:"Last name"})}),(0,r.jsx)("div",{className:"col-span-2 md:col-span-1",children:(0,r.jsx)(a.Z,{name:"password",type:"password",onChange:e=>{k(e.target.value)},children:"Password"})}),(0,r.jsx)("div",{className:"col-span-2 md:col-span-1",children:(0,r.jsx)(a.Z,{name:"password",type:"password",onChange:e=>{Z(e.target.value)},children:"New Password"})}),(0,r.jsx)("div",{className:"col-span-2 md:col-span-1 lg:col-span-2 mt-4 text-end",children:(0,r.jsx)(x.Z,{disable:P,buttonType:"submit",bgColor:"firebrick",children:P?"File is to big":"Save"})})]})]})})]})})},8607:function(e,t,s){"use strict";var r=s(5893);t.Z=e=>{let{handleClick:t,bgColor:s="red",buttonType:n="button",disable:a=!1,textColor:l="textWhite",children:i}=e,c={darkgray:"bg-darkgray hover:bg-gray",lightgray:"bg-lightgray hover:bg-darkgray",red:"bg-red hover:bg-firebrick",firebrick:"bg-firebrick hover:bg-red",white:"bg-white",textWhite:"text-white"};return(0,r.jsx)("button",{type:n,className:"w-full hover:text-white\n        ".concat(c[s]," ").concat(c[l]," p-2 rounded-md \n        shadow-lg ease-in duration-300"),onClick:t,disabled:a,children:i})}},4265:function(e,t,s){"use strict";var r=s(5893),n=s(7294);t.Z=e=>{let{message:t,onClose:s}=e,[a,l]=(0,n.useState)(!0),i=()=>{l(!a),s()};return a&&(0,r.jsx)("div",{className:"flex items-center justify-center fixed top-16 w-full z-40",children:(0,r.jsxs)("label",{className:"min-w-60 h-auto p-4 m-4 bg-red-100 border border-red-600 rounded cursor-pointer font-sans font-normal text-sm bg-lightdarkred",children:[(0,r.jsx)("input",{type:"checkbox",className:"hidden",autoComplete:"off",onChange:i}),(0,r.jsxs)("div",{className:"flex items-center flex-row-reverse text-white gap-4",children:[(0,r.jsx)("span",{className:"float-right pt-1 text-xs cursor-pointer",onClick:i,children:"X"}),(0,r.jsx)("span",{className:"mx-auto sm:text-lg",children:t})]})]})})}},3029:function(e,t,s){"use strict";var r=s(5893);t.Z=e=>{let{sm:t=!1,md:s=!1,lg:n=!1,children:a}=e,l=null;return l=s?"md":n?"lg":"sm",(0,r.jsx)("div",{className:"flex flex-col items-center justify-center \n        text-center rounded-full ring-1 ring-black relative\n        ".concat({sm:"w-6 h-6",md:"w-8 h-8",lg:"w-12 h-12"}[l]),children:a})}},601:function(e,t,s){"use strict";var r=s(5893),n=s(7294);t.Z=e=>{let{image:t="",setImage:s,removeImage:a,setFileSizeOverLimit:l,children:i}=e,[c,d]=(0,n.useState)(!1),o=e=>{if(e.length>0){let t=new FileReader;t.onload=e=>{s(e.target.result)},t.readAsDataURL(e[0])}},u=(0,n.createRef)();return(0,r.jsx)("div",{className:"text-center cursor-pointer",onDragEnter:e=>{e.preventDefault(),d(!0)},onDragLeave:e=>{e.preventDefault(),d(!1)},onDragOver:e=>{e.preventDefault()},onDrop:e=>{e.preventDefault(),d(!1),o(e.dataTransfer.files)},children:t?(0,r.jsx)("img",{src:t,alt:"Dropped",className:"max-w-full max-h-96 mx-auto",onClick:a}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{onClick:()=>{u.current.click()},children:i}),(0,r.jsx)("input",{type:"file",accept:"image/jpeg, image/png",ref:u,className:"hidden",onChange:e=>{let t=e.target.files,s=e.target.files[0].size;s>52428800?l(!0):l(!1),o(t)}})]})})}},8221:function(e,t,s){"use strict";var r=s(5893);t.Z=e=>{let{name:t,type:s="text",text:n="",value:a,noBorderOutline:l=!1,required:i="required",onChange:c,children:d}=e;return(0,r.jsxs)("label",{className:"flex flex-col text-left",children:[d,(0,r.jsx)("input",{type:s,name:t,value:a,placeholder:n,onChange:c,className:"".concat("border-radius-sm p-2 w-95 mt-2 font-open-sans"," ").concat(l?"border-0":"border"," rounded-md"),required:i})]})}},8455:function(e,t,s){"use strict";s.d(t,{Z:function(){return j}});var r=s(5893),n=s(7294),a=s(9332),l=s(1664),i=s.n(l),c=s(5675),d=s.n(c),o=e=>{let{iconName:t,altName:s,width:n=64,height:a=64}=e;return(0,r.jsx)(d(),{src:t,alt:s,width:n,height:a})},u={src:"/_next/static/media/PinEcho.f80cb176.svg",height:25,width:113,blurWidth:0,blurHeight:0},m=e=>{let{isOpen:t,setIsOpen:s,handleLogout:a}=e,l=(0,n.useRef)();return(0,n.useEffect)(()=>{let e=e=>{let t=l.current;t&&!t.contains(e.target)&&s(!1)},r=e=>{let r=document.querySelector(".user-icon");r&&r.contains(e.target)&&s(!t)};return t?(document.addEventListener("mousedown",e),document.addEventListener("mousedown",r)):(document.removeEventListener("mousedown",e),document.removeEventListener("mousedown",r)),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("mousedown",r)}},[t,s]),(0,r.jsx)("div",{ref:l,className:"absolute right-0 mt-2 bg-white border rounded-md shadow-md ".concat(t?"block":"hidden"),children:(0,r.jsxs)("ul",{className:"flex flex-col p-1 gap-2 z-40",children:[(0,r.jsx)("li",{className:"hover:bg-lightgray rounded-sm p-1",children:(0,r.jsx)(i(),{href:"/profile",className:"text-center px-2",children:(0,r.jsx)("span",{className:"text-black hover:text-indianred-200",children:"Profile"})})}),(0,r.jsx)("li",{className:"hover:bg-lightgray rounded-sm p-1",children:(0,r.jsx)(i(),{href:"/pin/saves",className:"text-center px-2",children:(0,r.jsx)("span",{className:"text-black hover:text-indianred-200",children:"Saves"})})}),(0,r.jsx)("li",{className:"hover:bg-lightgray rounded-sm p-1",onClick:a,children:(0,r.jsx)("span",{className:"text-center px-2 text-black hover:text-indianred-200 hover:cursor-pointer",children:"Logout"})})]})})},x=s(3029),h=s(9264),g=s(297),p=s(7102),f=s(4183),v=()=>{let e=(0,a.useRouter)(),[t,s]=(0,n.useState)(!1),{setAuthenticated:l}=(0,f.a)(),[c,d]=(0,n.useState)(null),[v,j]=(0,n.useState)("");(0,n.useEffect)(()=>{let e=async()=>{let e=(0,p.sY)();if(e){let e=await (0,g.PR)();d(e),j(e.profileImage?e.profileImage.path:"")}else l(!1)};e()},[]);let b=()=>{s(e=>!e)},N=async t=>{t.preventDefault();let s=await (0,g.kS)();s&&(l(!1),d(null),e.push("/"))};return(0,r.jsxs)("nav",{className:"fixed left-0 right-0 top-0 flex justify-between p-4 bg-snow drop-shadow-lg z-40",children:[(0,r.jsx)(i(),{href:"/",className:"flex justify-center align-center",children:(0,r.jsx)(o,{className:"m-0 p-0",iconName:u,altName:"pin"})}),c?(0,r.jsxs)("ul",{className:"flex items-center gap-4 text-white",children:[(0,r.jsx)("li",{className:"hover:bg-brightred bg-darkred py-1 px-4 rounded-lg ease-in duration-200",children:(0,r.jsx)(i(),{href:"/pin/create",children:(0,r.jsx)("span",{className:"text-sm text-black hover:text-indianred-200",children:"Create Pin"})})}),(0,r.jsxs)("li",{children:[(0,r.jsx)("span",{className:"hover:cursor-pointer text-black",onClick:b,children:(0,r.jsx)(x.Z,{md:!0,children:(0,r.jsx)(h.Z,{name:c.username,imgName:v})})}),(0,r.jsx)(m,{isOpen:t,setIsOpen:b,handleLogout:N})]})]}):(0,r.jsxs)("ul",{className:"flex items-center gap-4 text-white",children:[(0,r.jsx)("li",{className:"hover:bg-brightred bg-darkred py-1 px-4 rounded-lg ease-in duration-200",children:(0,r.jsx)(i(),{href:"/login",children:(0,r.jsx)("span",{className:"text-sm text-black hover:text-indianred-200",children:"Login"})})}),(0,r.jsx)("li",{className:"hover:bg-brightred bg-darkred py-1 px-4 rounded-lg ease-in duration-200",children:(0,r.jsx)(i(),{href:"/signup",children:(0,r.jsx)("span",{className:"text-sm text-black hover:text-indianred-200",children:"Sign Up"})})})]})]})};function j(e){let{children:t}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(v,{}),(0,r.jsx)("main",{className:"scroll-smooth mt-12",children:t})]})}},9264:function(e,t,s){"use strict";var r=s(5893),n=s(5675),a=s.n(n);t.Z=e=>{let{name:t="",imgName:s="",textSize:n="md",children:l}=e,i=t.slice(0,1).toUpperCase();return(0,r.jsxs)(r.Fragment,{children:[""!==s?(0,r.jsx)(a(),{className:"rounded-full",fill:!0,src:s,alt:s,placeholder:"blur",blurDataURL:s,sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"}):(0,r.jsxs)("span",{className:"font-semibold text-".concat(n),children:[" ",i," ",l," "]}),l]})}},1305:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var r=s(8288);function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/login";return(0,r.Z)({WrappedComponent:e,location:t,expectedAuth:!0})}},8288:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var r=s(5893),n=s(1163),a=s(4183);function l(){return(0,r.jsx)("p",{children:"Loading..."})}function i(e){let{WrappedComponent:t,LoadingComponent:s=l,expectedAuth:i,location:c}=e;return e=>{let l=(0,n.useRouter)(),{isLoading:d,isAuthenticated:o}=(0,a.a)();return d?(0,r.jsx)(s,{}):i!==o?(l.push(c),(0,r.jsx)(r.Fragment,{})):(0,r.jsx)(t,{...e})}}}},function(e){e.O(0,[976,61,997,774,888,179],function(){return e(e.s=3235)}),_N_E=e.O()}]);